- name: action perform on local
  hosts: localhost
  connection: local
  become: true

  tasks:
  - name: Add teams package repository GPG key
    uri:
      url: https://github.com/ashutosh-gaupale/test_pull/blob/main/apt-key.gpg
      dest: /etc/apt/trusted.gpg.d/microsoft.gpg
    environment:
      SSL_CERT_FILE: /home/user/ITSupport/firewall/figmd-DC002-Client.pem
#    shell: curl --cacert /home/user/ITSupport/firewall/figmd-DC002-Client.pem https://github.com/ashutosh-gaupale/test_pull/blob/main/apt-key.gpg | apt-key --keyring /usr/share/keyrings/microsoft.gpg add -
  - name: Add teams package repository
    apt_repository:
      repo: deb [arch=amd64] http://packages.microsoft.com/repos/ms-teams stable main
      state: present
      filename: teams
      update_cache: yes
  - name: Install teams
    apt:
      name:
        - teams
      state: latest
